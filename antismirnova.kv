#:import FadeTransition kivy.uix.screenmanager.FadeTransition
#:import utils kivy.utils
#:import Animation kivy.animation.Animation

<ScreenManagement>:
    transition: FadeTransition()
    MainUi:
        name: "Antismirnova"

<CustomLabel@Label>:
    -background_color: 0, 0, 0, 0
    -radius_top_left: 0
    -radius_top_right: 0
    -radius_bottom_right: 0
    -radius_bottom_left: 0
    text_size: self.size[0]-10, self.size[1]
    halign: "right"
    valign: "middle"
    canvas.before:
        Color:
            rgba: root.background_color
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: root.radius_top_left, root.radius_top_right, root.radius_bottom_right, root.radius_bottom_left

<CustomButton@ButtonBehavior+Label>:
    -canvas_color: 0, 0, 0, 0
    canvas.before:
        Color:
            rgba: root.canvas_color
        RoundedRectangle:
            group: "button_background"
            size: self.size
            pos: self.pos
    on_press:
        default_size = self.size
        animation_size = (self.size[0]*0.98, self.size[1]*0.98)

        default_pos = self.pos
        animation_pos = (self.pos[0]+(default_size[0]-animation_size[0])/2, self.pos[1]+(default_size[1]-animation_size[1])/2)

        animation = Animation(size=animation_size, duration=0.1)
        animation += Animation(size=default_size, duration=0.1)

        animation1 = Animation(pos=animation_pos, duration=0.1)
        animation1 += Animation(pos=default_pos, duration=0.1)

        animation.start(self.canvas.before.get_group("button_background")[0])
        animation1.start(self.canvas.before.get_group("button_background")[0])

<CustomTextInput>:
    canvas.before:
        Color:
            rgba: root.bg_color
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: self.radius

<MainUi>:
    canvas.before:
        Color:
            rgb: 255, 255, 255
        Rectangle:
            size: self.size
    GridLayout:
        rows: 2
        GridLayout:
            cols: 2
            AnchorLayout:
                padding: 50, 50, 25, 25
                size_hint: .6, 1
                Label:
                    id: drag_and_drop_label
                    text: "Drag & drop your file here"
                    color: "black"
                    canvas.before:
                        Color:
                            group: "color"
                            rgba: 255, 255, 0, .5
                        RoundedRectangle:
                            group: "rounded_rectangle"
                            size: self.size
                            pos: self.pos
            AnchorLayout:
                padding: 25, 50, 50, 25
                size_hint: .4, 1
                GridLayout:
                    rows: 2
                    padding: 10, 10, 10, 10
                    spacing: 5
                    canvas.before:
                        Color:
                            rgba: 255, 255, 0, .5
                        RoundedRectangle:
                            size: self.size
                            pos: self.pos
                    CustomButton:
                        canvas_color: utils.get_color_from_hex("5ec6ff")
                        text: "Reset metadata"
                    CustomButton:
                        canvas_color: utils.get_color_from_hex("5ec6ff")
                        text: "Send hello to Smivnova"
        AnchorLayout:
            padding: 50, 25, 50, 50
            GridLayout:
                cols: 2
                spacing: 5
                padding: 5, 5, 5, 5
                canvas.before:
                    Color:
                        rgba: 255, 255, 0, .5
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos
                BoxLayout:
                    orientation: "vertical"
                    spacing: 5
                    size_hint: .3, 1
                    CustomLabel:
                        text: "Creator:"
                        radius_top_left: 10
                        background_color: utils.get_color_from_hex("5ec6ff")
                        color: "black"
                    CustomLabel:
                        text: "Last modified by:"
                        background_color: utils.get_color_from_hex("5ec6ff")
                        color: "black"
                    CustomLabel:
                        text: "Revision:"
                        background_color: utils.get_color_from_hex("5ec6ff")
                        color: "black"
                    CustomLabel:
                        text: "Application:"
                        background_color: utils.get_color_from_hex("5ec6ff")
                        color: "black"
                    CustomLabel:
                        text: "Editing time:"
                        radius_bottom_left: 10
                        background_color: utils.get_color_from_hex("5ec6ff")
                        color: "black"
                BoxLayout:
                    orientation: "vertical"
                    spacing: 5
                    CustomTextInput:
                        id: creator_text_input
                        bg_color: utils.get_color_from_hex("5ec6ff")
                        radius: 0, 10, 0, 0
                    CustomTextInput:
                        id: last_modified_by_text_input
                        bg_color: utils.get_color_from_hex("5ec6ff")
                    CustomTextInput:
                        id: revision_text_input
                        bg_color: utils.get_color_from_hex("5ec6ff")
                    CustomTextInput:
                        id: application_text_input
                        bg_color: utils.get_color_from_hex("5ec6ff")
                    CustomTextInput:
                        id: editing_time_text_input
                        bg_color: utils.get_color_from_hex("5ec6ff")
                        radius: 0, 0, 10, 0
